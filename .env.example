# =============================================================================
# Database Configuration (Vercel Postgres - for existing Prisma models)
# =============================================================================
# Get these from Vercel Dashboard -> Storage -> Your Postgres DB -> Settings

# Pooled connection for runtime queries
POSTGRES_PRISMA_URL="postgres://user:password@host:5432/database?sslmode=require&pgbouncer=true"

# Direct connection for migrations
POSTGRES_URL_NON_POOLING="postgres://user:password@host:5432/database?sslmode=require"

# =============================================================================
# Supabase Configuration (for Signal Intelligence)
# =============================================================================
# Get these from Supabase Dashboard -> Settings -> API

# Server-side (service role - full access, NEVER expose to client)
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"

# Client-side (anon key - subject to RLS policies)
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-key"

# =============================================================================
# AEO Analyzer Configuration
# =============================================================================
# All values have safe defaults. Override as needed.

# Rate Limiting
AEO_RATE_LIMIT_PER_HOUR=10         # Max scans per IP per hour (default: 10)
AEO_DOMAIN_LIMIT_PER_DAY=50        # Max scans per domain per day (default: 50)

# Timeouts
AEO_FETCH_TIMEOUT_MS=12000         # Fetch timeout in ms (default: 12000)
AEO_RENDER_TIMEOUT_MS=15000        # Playwright render timeout in ms (default: 15000)

# Size Limits
AEO_MAX_HTML_BYTES=2000000         # Max HTML size in bytes (default: 2MB)
AEO_MAX_TEXT_CHARS=200000          # Max extracted text chars (default: 200k)
AEO_MAX_REDIRECTS=5                # Max redirects to follow (default: 5)

# Security - REQUIRED in production
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
AEO_IP_HASH_SALT=your-random-salt-here

# Playwright (optional rendering fallback for JS-heavy pages)
PLAYWRIGHT_ENABLED=false

# =============================================================================
# Email Notifications (optional)
# =============================================================================
# Get your API key from https://resend.com
RESEND_API_KEY=re_xxxxxxxxxx
# Email address to receive audit notifications
NOTIFICATION_EMAIL=you@example.com

# =============================================================================
# Sanity Configuration (for Notes/Blog)
# =============================================================================
# Get your project ID from https://sanity.io/manage
NEXT_PUBLIC_SANITY_PROJECT_ID=your-project-id
NEXT_PUBLIC_SANITY_DATASET=production

# =============================================================================
# Admin Access (Signal Intelligence)
# =============================================================================
# Simple password gate for admin pages
# Leave empty to disable password protection (development mode)
ADMIN_PASSWORD=your-secure-admin-password

# =============================================================================
# OpenAI (Optional - for brief polishing)
# =============================================================================
# If set, briefs will be polished with AI. Otherwise, template-based briefs are used.
OPENAI_API_KEY=sk-your-openai-key

# =============================================================================
# AI Attribution Tracker
# =============================================================================
# Base URL for the application (used in emails and tracking script)
NEXT_PUBLIC_BASE_URL=https://jerseyproper.com

# Cron job secret (for securing the daily summary endpoint)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CRON_SECRET=your-cron-secret-here

# Email sender address (optional, defaults to Resend onboarding address)
FROM_EMAIL=AI Attribution <alerts@jerseyproper.com>

# =============================================================================
# Signal Intelligence - Real Data Providers (Optional)
# =============================================================================
# Without these, the system uses sample fixture data.
# With these, it fetches real competitor data.

# Meta Ad Library API (Facebook/Instagram ads)
# 1. Create app at developers.facebook.com
# 2. Get access token with ads_read permission
# Docs: https://www.facebook.com/ads/library/api
META_ACCESS_TOKEN=your-meta-access-token

# Google Places API (Reviews/Visibility)
# 1. Enable Places API in Google Cloud Console
# 2. Create an API key
# Docs: https://developers.google.com/maps/documentation/places
GOOGLE_PLACES_API_KEY=your-google-places-api-key

# Note: Blog scraping doesn't require an API key
